"use strict";(self.webpackChunkwirepharma=self.webpackChunkwirepharma||[]).push([[525],{4525:(Zt,G,c)=>{c.r(G),c.d(G,{SellingModule:()=>yt});var y=c(5357),v=c(9808),e=c(5e3),W=c(2313),oe=c(9770),le=c(727),Y=c(4968),ae=c(4782),z=c(8372),l=c(3075),ce=c(655);const de=[[["","quill-editor-toolbar",""]]],ue=["[quill-editor-toolbar]"],V={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},M=(i,o)=>i||o||"html",X=new e.OlP("config",{providedIn:"root",factory:()=>({modules:V})});let K=(()=>{class i{constructor(t,s){this.config=s,this.quill$=(0,oe.P)(()=>(0,ce.mG)(this,void 0,void 0,function*(){var r,n;if(!this.Quill){const a=this.document.addEventListener;this.document.addEventListener=this.document.__zone_symbol__addEventListener||this.document.addEventListener;const d=yield c.e(971).then(c.t.bind(c,9971,19));this.document.addEventListener=a,this.Quill=d.default?d.default:d}return null===(r=this.config.customOptions)||void 0===r||r.forEach(a=>{const d=this.Quill.import(a.import);d.whitelist=a.whitelist,this.Quill.register(d,!0,this.config.suppressGlobalRegisterWarning)}),null===(n=this.config.customModules)||void 0===n||n.forEach(({implementation:a,path:d})=>{this.Quill.register(d,a,this.config.suppressGlobalRegisterWarning)}),this.Quill})).pipe((0,ae.d)({bufferSize:1,refCount:!0})),this.document=t.get(v.K0),this.config||(this.config={modules:V})}getQuill(){return this.quill$}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.zs3),e.LFG(X,8))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),me=(()=>{class i{constructor(t,s,r,n,a,d,T,q){this.elementRef=s,this.cd=r,this.domSanitizer=n,this.platformId=a,this.renderer=d,this.zone=T,this.service=q,this.required=!1,this.customToolbarPosition="top",this.sanitize=!1,this.styles=null,this.strict=!0,this.customOptions=[],this.customModules=[],this.preserveWhitespace=!1,this.trimOnValidation=!1,this.compareValues=!1,this.filterNull=!1,this.defaultEmptyValue=null,this.onEditorCreated=new e.vpe,this.onEditorChanged=new e.vpe,this.onContentChanged=new e.vpe,this.onSelectionChanged=new e.vpe,this.onFocus=new e.vpe,this.onBlur=new e.vpe,this.disabled=!1,this.subscription=null,this.quillSubscription=null,this.valueGetter=(p,h)=>{let u=h.querySelector(".ql-editor").innerHTML;("<p><br></p>"===u||"<div><br></div>"===u)&&(u=this.defaultEmptyValue);let m=u;const x=M(this.format,this.service.config.format);if("text"===x)m=p.getText();else if("object"===x)m=p.getContents();else if("json"===x)try{m=JSON.stringify(p.getContents())}catch(b){m=p.getText()}return m},this.valueSetter=(p,h)=>{const u=M(this.format,this.service.config.format);if("html"===u)return this.sanitize&&(h=this.domSanitizer.sanitize(e.q3G.HTML,h)),p.clipboard.convert(h);if("json"===u)try{return JSON.parse(h)}catch(m){return[{insert:h}]}return h},this.selectionChangeHandler=(p,h,u)=>{const m=!p&&!!this.onModelTouched;!this.onBlur.observers.length&&!this.onFocus.observers.length&&!this.onSelectionChanged.observers.length&&!m||this.zone.run(()=>{null===p?this.onBlur.emit({editor:this.quillEditor,source:u}):null===h&&this.onFocus.emit({editor:this.quillEditor,source:u}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:h,range:p,source:u}),m&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(p,h,u)=>{const m=this.quillEditor.getText(),x=this.quillEditor.getContents();let b=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===b||"<div><br></div>"===b)&&(b=this.defaultEmptyValue);const _=this.trackChanges||this.service.config.trackChanges,ne=("user"===u||_&&"all"===_)&&!!this.onModelChange;!this.onContentChanged.observers.length&&!ne||this.zone.run(()=>{ne&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:x,delta:p,editor:this.quillEditor,html:b,oldDelta:h,source:u,text:m}),this.cd.markForCheck()})},this.editorChangeHandler=(p,h,u,m)=>{if(this.onEditorChanged.observers.length)if("text-change"===p){const x=this.quillEditor.getText(),b=this.quillEditor.getContents();let _=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===_||"<div><br></div>"===_)&&(_=this.defaultEmptyValue),this.zone.run(()=>{this.onEditorChanged.emit({content:b,delta:h,editor:this.quillEditor,event:p,html:_,oldDelta:u,source:m,text:x}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:p,oldRange:u,range:h,source:m}),this.cd.markForCheck()})},this.document=t.get(v.K0)}static normalizeClassNames(t){return t.trim().split(" ").reduce((r,n)=>{const a=n.trim();return a&&r.push(a),r},[])}ngAfterViewInit(){(0,v.PM)(this.platformId)||(this.quillSubscription=this.service.getQuill().subscribe(t=>{this.elementRef.nativeElement.insertAdjacentHTML("top"===this.customToolbarPosition?"beforeend":"afterbegin",this.preserveWhitespace?"<pre quill-editor-element></pre>":"<div quill-editor-element></div>"),this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const s=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),r=Object.assign({},this.modules||this.service.config.modules);s?r.toolbar=s:void 0===r.toolbar&&(r.toolbar=V.toolbar);let n=void 0!==this.placeholder?this.placeholder:this.service.config.placeholder;void 0===n&&(n="Insert text here ..."),this.styles&&Object.keys(this.styles).forEach(u=>{this.renderer.setStyle(this.editorElem,u,this.styles[u])}),this.classes&&this.addClasses(this.classes),this.customOptions.forEach(u=>{const m=t.import(u.import);m.whitelist=u.whitelist,t.register(m,!0)}),this.customModules.forEach(({implementation:u,path:m})=>{t.register(m,u)});let a=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds;a||(a=this.service.config.bounds?this.service.config.bounds:this.document.body);let d=this.debug;!d&&!1!==d&&this.service.config.debug&&(d=this.service.config.debug);let T=this.readOnly;!T&&!1!==this.readOnly&&(T=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let q=this.defaultEmptyValue;this.service.config.hasOwnProperty("defaultEmptyValue")&&(q=this.service.config.defaultEmptyValue);let p=this.scrollingContainer;!p&&null!==this.scrollingContainer&&(p=null===this.service.config.scrollingContainer||this.service.config.scrollingContainer?this.service.config.scrollingContainer:null);let h=this.formats;if(!h&&void 0===h&&(h=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{var u,m,x;if(this.quillEditor=new t(this.editorElem,{bounds:a,debug:d,formats:h,modules:r,placeholder:n,readOnly:T,defaultEmptyValue:q,scrollingContainer:p,strict:this.strict,theme:this.theme||(this.service.config.theme?this.service.config.theme:"snow")}),this.linkPlaceholder){const b=null===(m=null===(u=this.quillEditor)||void 0===u?void 0:u.theme)||void 0===m?void 0:m.tooltip,_=null===(x=null==b?void 0:b.root)||void 0===x?void 0:x.querySelector("input[data-link]");(null==_?void 0:_.dataset)&&(_.dataset.link=this.linkPlaceholder)}}),this.content){if("text"===M(this.format,this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const m=this.valueSetter(this.quillEditor,this.content);this.quillEditor.setContents(m,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),(this.onEditorCreated.observers.length||this.onValidatorChanged)&&requestAnimationFrame(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnDestroy(){var t;this.dispose(),null===(t=this.quillSubscription)||void 0===t||t.unsubscribe(),this.quillSubscription=null}ngOnChanges(t){if(this.quillEditor){if(t.readOnly&&this.quillEditor.enable(!t.readOnly.currentValue),t.placeholder&&(this.quillEditor.root.dataset.placeholder=t.placeholder.currentValue),t.defaultEmptyValue&&(this.quillEditor.root.dataset.defaultEmptyValue=t.defaultEmptyValue.currentValue),t.styles){const s=t.styles.currentValue,r=t.styles.previousValue;r&&Object.keys(r).forEach(n=>{this.renderer.removeStyle(this.editorElem,n)}),s&&Object.keys(s).forEach(n=>{this.renderer.setStyle(this.editorElem,n,this.styles[n])})}if(t.classes){const s=t.classes.currentValue,r=t.classes.previousValue;r&&this.removeClasses(r),s&&this.addClasses(s)}t.debounceTime&&this.addQuillEventListeners()}}addClasses(t){i.normalizeClassNames(t).forEach(s=>{this.renderer.addClass(this.editorElem,s)})}removeClasses(t){i.normalizeClassNames(t).forEach(s=>{this.renderer.removeClass(this.editorElem,s)})}writeValue(t){if(this.filterNull&&null===t||(this.content=t,!this.quillEditor))return;const s=M(this.format,this.service.config.format),r=this.valueSetter(this.quillEditor,t);if(this.compareValues){const n=this.quillEditor.getContents();if(JSON.stringify(n)===JSON.stringify(r))return}t?"text"===s?this.quillEditor.setText(t):this.quillEditor.setContents(r):this.quillEditor.setText("")}setDisabledState(t=this.disabled){this.disabled=t,this.quillEditor&&(t?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}registerOnValidatorChange(t){this.onValidatorChanged=t}validate(){if(!this.quillEditor)return null;const t={};let s=!0;const r=this.quillEditor.getText(),n=this.trimOnValidation?r.trim().length:1===r.length&&0===r.trim().length?0:r.length-1,a=this.quillEditor.getContents().ops,d=a&&1===a.length&&["\n",""].includes(a[0].insert);return this.minLength&&n&&n<this.minLength&&(t.minLengthError={given:n,minLength:this.minLength},s=!1),this.maxLength&&n>this.maxLength&&(t.maxLengthError={given:n,maxLength:this.maxLength},s=!1),this.required&&!n&&d&&(t.requiredError={empty:!0},s=!1),s?null:t}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new le.w0,this.subscription.add((0,Y.R)(this.quillEditor,"selection-change").subscribe(([r,n,a])=>{this.selectionChangeHandler(r,n,a)}));let t=(0,Y.R)(this.quillEditor,"text-change"),s=(0,Y.R)(this.quillEditor,"editor-change");"number"==typeof this.debounceTime&&(t=t.pipe((0,z.b)(this.debounceTime)),s=s.pipe((0,z.b)(this.debounceTime))),this.subscription.add(t.subscribe(([r,n,a])=>{this.textChangeHandler(r,n,a)})),this.subscription.add(s.subscribe(([r,n,a,d])=>{this.editorChangeHandler(r,n,a,d)}))})}dispose(){null!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.zs3),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(W.H7),e.Y36(e.Lbi),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(K))},i.\u0275dir=e.lG2({type:i,inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",required:"required",formats:"formats",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",styles:"styles",strict:"strict",scrollingContainer:"scrollingContainer",bounds:"bounds",customOptions:"customOptions",customModules:"customModules",trackChanges:"trackChanges",preserveWhitespace:"preserveWhitespace",classes:"classes",trimOnValidation:"trimOnValidation",linkPlaceholder:"linkPlaceholder",compareValues:"compareValues",filterNull:"filterNull",debounceTime:"debounceTime",defaultEmptyValue:"defaultEmptyValue",valueGetter:"valueGetter",valueSetter:"valueSetter"},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur"},features:[e.TTD]}),i})(),H=(()=>{class i extends me{constructor(t,s,r,n,a,d,T,q){super(t,s,r,n,a,d,T,q)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.zs3),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(W.H7),e.Y36(e.Lbi),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["quill-editor"]],features:[e._Bn([{multi:!0,provide:l.JU,useExisting:(0,e.Gpc)(()=>i)},{multi:!0,provide:l.Cf,useExisting:(0,e.Gpc)(()=>i)}]),e.qOj],ngContentSelectors:ue,decls:1,vars:0,template:function(t,s){1&t&&(e.F$t(de),e.Hsn(0))},styles:[":host{display:inline-block}\n"],encapsulation:2}),i})(),he=(()=>{class i{static forRoot(t){return{ngModule:i,providers:[{provide:X,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[v.ez]]}),i})();var pe=c(499);let ge=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["ath-selling"]],decls:1,vars:0,template:function(t,s){1&t&&e._UZ(0,"router-outlet")},directives:[y.lC],encapsulation:2}),i})();var A=c(5245),ee=c(7238);let fe=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["selling-panel"]],decls:130,vars:3,consts:[[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl","p-6","mx-auto","md:p-8"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","leading-8","tracking-tight"],[1,"font-medium","tracking-tight","text-secondary"],[1,"grid","w-full","grid-cols-1","gap-8","mt-6","sm:grid-cols-2","lg:grid-cols-4","md:mt-8"],["routerLink","/stock/panels/products",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],[1,"flex","items-start","justify-between"],[1,"text-lg","font-medium","leading-6","tracking-tight","truncate"],[1,"ml-2"],[1,"h-6","px-2","rounded-lg","min-h-6","bg-primary-100"],[1,"font-mono","text-lg","font-medium","text-primary-500"],["routerLink","/selling/panels/orders",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],[1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],[1,"w-full","mt-12"],[1,"text-2xl","font-semibold","leading-6","tracking-tight"],[1,"flex","flex-col","flex-auto","p-6","overflow-hidden","shadow","bg-card","rounded-2xl"],[1,"flex","items-start","justify-start"],[1,"mr-3",3,"svgIcon"],[1,"flex","flex-col","mt-5"],["routerLink","/crm/panels/customers",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],[1,"flex","items-center","justify-center","w-6","h-6","mr-3","rounded-lg","bg-primary-100"],[1,"w-1","h-1","rounded-full","bg-primary-500"],[1,"text-lg","leading-6","tracking-tight"],["routerLink","/selling/panels/orders",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["matTooltip","En desarrollo",1,"flex","items-center","justify-start","p-1.5","cursor-not-allowed","rounded-lg","hover:bg-hover"],[1,"flex","items-center","justify-center","w-6","h-6","mr-3","rounded-lg","bg-slate-100"],[1,"w-1","h-1","rounded-full","bg-slate-900"],["routerLink","/stock/panels/products",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["routerLink","/stock/panels/categories",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["routerLink","/selling/panels/use-terms",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["routerLink","/selling/panels/payment-terms",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["routerLink","/selling/panels/return-policy",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),e._uU(5,"Gesti\xf3n de Ventas"),e.qZA(),e.TgZ(6,"div",4),e._uU(7," Este m\xf3dulo est\xe1 dedicado a todos los componentes de la gesti\xf3n de ventas. "),e.qZA()()(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8),e._uU(12,"Productos"),e.qZA(),e.TgZ(13,"div",9)(14,"div",10)(15,"span",11),e._uU(16,"0"),e.qZA()()()()(),e.TgZ(17,"div",12)(18,"div",7)(19,"div",8),e._uU(20,"\xd3rdenes"),e.qZA(),e.TgZ(21,"div",9)(22,"div",10)(23,"span",11),e._uU(24,"0"),e.qZA()()()()(),e.TgZ(25,"div",13)(26,"div",7)(27,"div",8),e._uU(28,"An\xe1lisis de ventas"),e.qZA()()(),e.TgZ(29,"div",13)(30,"div",7)(31,"div",8),e._uU(32,"Estad\xedsticas"),e.qZA()()()(),e.TgZ(33,"div",14)(34,"div",15),e._uU(35,"Reportes y Listados"),e.qZA()(),e.TgZ(36,"div",5)(37,"div",16)(38,"div",17),e._UZ(39,"mat-icon",18),e.TgZ(40,"div",8),e._uU(41,"Ventas"),e.qZA()(),e.TgZ(42,"div",19)(43,"div",20)(44,"div",21),e._UZ(45,"div",22),e.qZA(),e.TgZ(46,"div",23),e._uU(47,"Clientes"),e.qZA()(),e.TgZ(48,"div",24)(49,"div",21),e._UZ(50,"div",22),e.qZA(),e.TgZ(51,"div",23),e._uU(52,"\xd3rdenes de Ventas"),e.qZA()(),e.TgZ(53,"div",25)(54,"div",26),e._UZ(55,"div",27),e.qZA(),e.TgZ(56,"div",23),e._uU(57,"Facturas de Ventas"),e.qZA()(),e.TgZ(58,"div",25)(59,"div",26),e._UZ(60,"div",27),e.qZA(),e.TgZ(61,"div",23),e._uU(62,"Ofertas"),e.qZA()(),e.TgZ(63,"div",25)(64,"div",26),e._UZ(65,"div",27),e.qZA(),e.TgZ(66,"div",23),e._uU(67,"Vendedores"),e.qZA()()()(),e.TgZ(68,"div",16)(69,"div",17),e._UZ(70,"mat-icon",18),e.TgZ(71,"div",8),e._uU(72,"Productos y Precios"),e.qZA()(),e.TgZ(73,"div",19)(74,"div",28)(75,"div",21),e._UZ(76,"div",22),e.qZA(),e.TgZ(77,"div",23),e._uU(78,"Productos"),e.qZA()(),e.TgZ(79,"div",29)(80,"div",21),e._UZ(81,"div",22),e.qZA(),e.TgZ(82,"div",23),e._uU(83,"Categor\xedas de productos"),e.qZA()(),e.TgZ(84,"div",25)(85,"div",26),e._UZ(86,"div",27),e.qZA(),e.TgZ(87,"div",23),e._uU(88,"Reglas de precios"),e.qZA()(),e.TgZ(89,"div",25)(90,"div",26),e._UZ(91,"div",27),e.qZA(),e.TgZ(92,"div",23),e._uU(93,"Reglas de env\xedo"),e.qZA()()()(),e.TgZ(94,"div",16)(95,"div",17),e._UZ(96,"mat-icon",18),e.TgZ(97,"div",8),e._uU(98,"Informaci\xf3n General"),e.qZA()(),e.TgZ(99,"div",19)(100,"div",30)(101,"div",21),e._UZ(102,"div",22),e.qZA(),e.TgZ(103,"div",23),e._uU(104,"T\xe9rminos y condiciones"),e.qZA()(),e.TgZ(105,"div",31)(106,"div",21),e._UZ(107,"div",22),e.qZA(),e.TgZ(108,"div",23),e._uU(109,"T\xe9rminos de pago"),e.qZA()(),e.TgZ(110,"div",32)(111,"div",21),e._UZ(112,"div",22),e.qZA(),e.TgZ(113,"div",23),e._uU(114,"Pol\xedtica de devoluciones"),e.qZA()(),e.TgZ(115,"div",32)(116,"div",21),e._UZ(117,"div",22),e.qZA(),e.TgZ(118,"div",23),e._uU(119,"Pol\xedtica de cookies"),e.qZA()(),e.TgZ(120,"div",25)(121,"div",26),e._UZ(122,"div",27),e.qZA(),e.TgZ(123,"div",23),e._uU(124,"Informaci\xf3n de contacto"),e.qZA()(),e.TgZ(125,"div",25)(126,"div",26),e._UZ(127,"div",27),e.qZA(),e.TgZ(128,"div",23),e._uU(129,"Plantilla de impuestos"),e.qZA()()()()()()()),2&t&&(e.xp6(39),e.Q6J("svgIcon","heroicons_outline:document-text"),e.xp6(31),e.Q6J("svgIcon","heroicons_outline:document-text"),e.xp6(26),e.Q6J("svgIcon","heroicons_outline:document-text"))},directives:[y.rH,A.Hw,ee.gM],encapsulation:2}),i})(),_e=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["selling-orders"]],decls:1,vars:0,template:function(t,s){1&t&&e._UZ(0,"router-outlet")},directives:[y.lC],encapsulation:2}),i})();var te=c(6087),P=c(4847),C=c(9646),O=c(7579),ve=c(6451),g=c(2722),w=c(3900),f=c(5094);const j=i=>i.orders,xe=((0,f.P1)(j,i=>i.order),(0,f.P1)(j,i=>i.orders));(0,f.P1)(j,i=>i.ordersByWeekdayStats);var be=c(8288),Te=c(1927),J=c(1135),S=c(8505),Ce=c(4813),E=c(5698),R=c(4004),I=c(6381),ie=c(2340),se=c(520);const L=ie.N.API_URL;let ye=(()=>{class i{constructor(t,s){this._httpClient=t,this.store=s,this._pagination=new J.X(null),this._order=new J.X(null),this._orders=new J.X([])}get pagination$(){return this._pagination.asObservable()}get order$(){return this._order.asObservable()}get orders$(){return this._orders.asObservable()}getOrders(t=0,s=10,r="orderNo",n="asc",a=""){return this._httpClient.get(`${L}/orders/`,{params:{page:""+t,size:""+s,sort:r,order:n}}).pipe((0,S.b)(d=>(this._pagination.next(d.pagination),this._orders.next(d.orders),this.store.dispatch((0,I.qQ)({orders:d.orders})),d)))}getOrdersByBusiness(t){if(null!==t)return this._httpClient.get(`${L}/orders/business/${t}`).pipe((0,S.b)(s=>{this._orders.next(s.orders),this.store.dispatch((0,I.qQ)({orders:s.orders}))}))}getOrderById(t){if(null!==t)return this._httpClient.get(`${L}/orders/${t}`).pipe((0,Ce.j)("order"),(0,S.b)(s=>{this.store.dispatch((0,I.OL)({order:s}))}))}updateOrder(t){return this.orders$.pipe((0,E.q)(1),(0,w.w)(s=>this._httpClient.put(`${L}/orders/${t._id}`,t).pipe((0,R.U)(r=>{const n=s.findIndex(a=>a._id===t._id);return s[n]=r.order,this._orders.next(s),this.store.dispatch((0,I.qQ)({orders:s})),r}))))}updateOrderStatus(t){return this.orders$.pipe((0,E.q)(1),(0,w.w)(s=>this._httpClient.put(`${L}/orders/update-state`,t).pipe((0,R.U)(r=>{const n=s.findIndex(a=>a._id===t.orderId);return s[n]=r.updatedOrder,this._orders.next(s),this.store.dispatch((0,I.qQ)({orders:s})),r}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(se.eN),e.LFG(f.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var B=c(7322),Ze=c(7531),N=c(7423),we=c(2494),ke=c(7446);const qe=["htmlOrderList"];function Se(i,o){1&i&&e.GkF(0)}const Ae=function(i){return{$implicit:i}};function Oe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Se,1,0,"ng-container",33),e.BQk()),2&i){const t=e.oxw().$implicit;e.oxw(4);const s=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(2,Ae,t))}}const Ee=function(i,o,t,s,r,n){return{"bg-pink-200 text-pink-800 dark:bg-pink-600 dark:text-pink-50":i,"bg-teal-200 text-teal-800 dark:bg-teal-600 dark:text-teal-50":o,"bg-orange-200 text-orange-800 dark:bg-orange-600 dark:text-orange-50":t,"bg-yellow-200 text-yellow-800 dark:bg-yellow-600 dark:text-yellow-50":s,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":r,"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":n}};function Ie(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",22)(2,"div",23),e._uU(3),e.qZA(),e.TgZ(4,"div",24),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"div",25),e._uU(8),e.qZA(),e.TgZ(9,"div",25),e._uU(10),e.qZA(),e.TgZ(11,"div",16),e._uU(12),e.qZA(),e.TgZ(13,"div",18),e._uU(14),e.ALo(15,"number"),e.qZA(),e.TgZ(16,"div",26)(17,"span",27)(18,"span",28),e._uU(19),e.qZA()()(),e.TgZ(20,"div",29)(21,"button",30),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(4).viewPurchaseOrder(n._id)}),e._UZ(22,"mat-icon",31),e.qZA(),e.TgZ(23,"button",32),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(4).toggleDetails(n._id)}),e._UZ(24,"mat-icon",31),e.qZA()()(),e.TgZ(25,"div",13),e.YNc(26,Oe,2,4,"ng-container",9),e.qZA(),e.BQk()}if(2&i){const t=o.$implicit,s=e.oxw(4);e.xp6(3),e.hij(" ",t.tracking," "),e.xp6(2),e.hij(" ",e.xi3(6,12,t.createdAt,"shortDate")," "),e.xp6(3),e.hij(" ",t.beneficiary.fullName," "),e.xp6(2),e.hij(" ",t.businessId.name," "),e.xp6(2),e.hij(" ",t.products.length," "),e.xp6(2),e.hij(" ",e.xi3(15,15,t.total,"1.2-2")," "),e.xp6(3),e.Q6J("ngClass",e.HTZ(18,Ee,"Pendiente de pago"===t.status,"Pagada"===t.status,"Lista"===t.status,"Transportando"===t.status,"Entregada"===t.status,"Cancelada"===t.status)),e.xp6(2),e.Oqu(t.status),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:document-text"),e.xp6(1),e.Q6J("matTooltip",(null==s.selectedOrder?null:s.selectedOrder._id)===t._id?"Cerrar panel de estados":"Actualizar estado"),e.xp6(1),e.Q6J("svgIcon",(null==s.selectedOrder?null:s.selectedOrder._id)===t._id?"heroicons_solid:chevron-up":"heroicons_solid:refresh"),e.xp6(2),e.Q6J("ngIf",(null==s.selectedOrder?null:s.selectedOrder.id)===t.id)}}function Le(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Ie,27,25,"ng-container",21),e.BQk()),2&i){const t=o.ngIf,s=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",s.trackByFn)}}const Ue=function(i){return{"pointer-events-none":i}},Fe=function(){return[5,10,25,100]};function Qe(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",13)(2,"div",14)(3,"div",15),e._uU(4," N\xfamero "),e.qZA(),e.TgZ(5,"div",16),e._uU(6," Fecha "),e.qZA(),e.TgZ(7,"div",17),e._uU(8," Beneficiario "),e.qZA(),e.TgZ(9,"div",16),e._uU(10," Cantidad de productos "),e.qZA(),e.TgZ(11,"div",18),e._uU(12," Importe "),e.qZA(),e.TgZ(13,"div",16),e._uU(14," Estado "),e.qZA(),e.TgZ(15,"div",19),e._uU(16," Acciones "),e.qZA()(),e.YNc(17,Le,2,2,"ng-container",9),e.ALo(18,"async"),e.qZA(),e._UZ(19,"mat-paginator",20),e.BQk()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","orderNo"),e.xp6(14),e.Q6J("ngIf",e.lcZ(18,8,t.orders$)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,Ue,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(12,Fe))("showFirstLastButtons",!0)}}function Me(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Qe,20,13,"ng-container",12),e.BQk()),2&i){const t=o.ngIf;e.oxw();const s=e.MAs(15);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",s)}}function Je(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"fuse-alert",50)(2,"span",51),e._uU(3),e.qZA(),e._uU(4),e.qZA(),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("type","success")("appearance","outline"),e.xp6(2),e.Oqu(t.alertTitle),e.xp6(1),e.hij(" ",t.alertMessage," ")}}function Re(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"fuse-alert",50)(2,"span",51),e._uU(3),e.qZA(),e._uU(4),e.qZA(),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("type","error")("appearance","outline"),e.xp6(2),e.Oqu(t.alertTitle),e.xp6(1),e.hij(" ",t.alertMessage," ")}}function Ne(i,o){if(1&i&&(e.TgZ(0,"div",49),e.YNc(1,Je,5,4,"ng-container",9),e.YNc(2,Re,5,4,"ng-container",9),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","success"===t.flashMessage),e.xp6(1),e.Q6J("ngIf","error"===t.flashMessage)}}function $e(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.createdAt))}}function De(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.createdAt,"hh:mm:ss a"))}}function Ye(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.payedAt))}}function ze(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.payedAt,"hh:mm:ss a"))}}function Ve(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.readyAt))}}function He(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.readyAt,"hh:mm:ss a"))}}function Pe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).setReadyStatus()}),e._UZ(1,"mat-icon",57),e.qZA()}2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function je(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).setReadyStatus()}),e._UZ(1,"mat-icon",59),e.qZA()}2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Be(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",29),e.YNc(1,Pe,2,1,"button",52),e.YNc(2,je,2,1,"button",53),e.TgZ(3,"button",54),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).saveReadyStatus()}),e._UZ(4,"mat-icon",55),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.ready),e.xp6(1),e.Q6J("ngIf",t.ready),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:refresh")}}function Ge(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.shippedAt))}}function We(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.shippedAt,"hh:mm:ss a"))}}function Xe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",62),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).setShippedStatus()}),e._UZ(1,"mat-icon",57),e.qZA()}2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Ke(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).setShippedStatus()}),e._UZ(1,"mat-icon",59),e.qZA()}2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function et(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",29),e.YNc(1,Xe,2,1,"button",60),e.YNc(2,Ke,2,1,"button",61),e.TgZ(3,"button",54),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).saveShippedStatus()}),e._UZ(4,"mat-icon",55),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.shipped),e.xp6(1),e.Q6J("ngIf",t.shipped),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:refresh")}}function tt(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.deliveredAt))}}function it(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.deliveredAt,"hh:mm:ss a"))}}function st(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",66),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).setDeliveredStatus()}),e._UZ(1,"mat-icon",57),e.qZA()}2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function rt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",67),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).setDeliveredStatus()}),e._UZ(1,"mat-icon",59),e.qZA()}2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function nt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",29),e.YNc(1,st,2,1,"button",64),e.YNc(2,rt,2,1,"button",65),e.TgZ(3,"button",54),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).saveDeliveredStatus()}),e._UZ(4,"mat-icon",55),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.delivered),e.xp6(1),e.Q6J("ngIf",t.delivered),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:refresh")}}function ot(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.canceledAt))}}function lt(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.canceledAt,"hh:mm:ss a"))}}function at(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",70),e.NdJ("click",function(){return e.CHM(t),e.oxw(4).setCanceledStatus()}),e._UZ(1,"mat-icon",57),e.qZA()}2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function ct(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){return e.CHM(t),e.oxw(4).setCanceledStatus()}),e._UZ(1,"mat-icon",59),e.qZA()}2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function dt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",29),e.YNc(1,at,2,1,"button",68),e.YNc(2,ct,2,1,"button",69),e.TgZ(3,"button",54),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).saveCanceledStatus()}),e._UZ(4,"mat-icon",55),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.canceled),e.xp6(1),e.Q6J("ngIf",t.canceled),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:refresh")}}function ut(i,o){if(1&i&&(e.TgZ(0,"div",42),e._UZ(1,"mat-checkbox",45),e.TgZ(2,"span"),e._uU(3," Cancelada "),e.qZA(),e.YNc(4,ot,3,3,"span",9),e.YNc(5,lt,3,4,"span",9),e.YNc(6,dt,5,3,"div",46),e.qZA()),2&i){const t=e.oxw().$implicit,s=e.oxw();e.xp6(1),e.Q6J("color","primary")("checked",s.canceled)("formControlName","canceled"),e.xp6(3),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.canceledAt),e.xp6(1),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.canceledAt),e.xp6(1),e.Q6J("ngIf",!s.delivered)}}function mt(i,o){1&i&&(e.TgZ(0,"div",72)(1,"mat-form-field",73)(2,"mat-label"),e._uU(3,"Motivos de la cancelaci\xf3n de la orden"),e.qZA(),e._UZ(4,"textarea",74),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("formControlName","cancelObs"))}function ht(i,o){if(1&i&&(e.TgZ(0,"div",34)(1,"div",35)(2,"form",36)(3,"div",37)(4,"div",38)(5,"span",39),e._uU(6,"Actualizar estado"),e.qZA(),e.YNc(7,Ne,3,2,"div",40),e.TgZ(8,"div",41)(9,"div",42),e._UZ(10,"mat-checkbox",43),e.TgZ(11,"span"),e._uU(12," Pendiente de Pago "),e.qZA(),e.YNc(13,$e,3,3,"span",9),e.YNc(14,De,3,4,"span",9),e.qZA(),e.TgZ(15,"div",42),e._UZ(16,"mat-checkbox",44),e.TgZ(17,"span"),e._uU(18," Pagada "),e.qZA(),e.YNc(19,Ye,3,3,"span",9),e.YNc(20,ze,3,4,"span",9),e.qZA(),e.TgZ(21,"div",42),e._UZ(22,"mat-checkbox",45),e.TgZ(23,"span"),e._uU(24," Lista "),e.qZA(),e.YNc(25,Ve,3,3,"span",9),e.YNc(26,He,3,4,"span",9),e.YNc(27,Be,5,3,"div",46),e.qZA(),e.TgZ(28,"div",42),e._UZ(29,"mat-checkbox",45),e.TgZ(30,"span"),e._uU(31," Transportando "),e.qZA(),e.YNc(32,Ge,3,3,"span",9),e.YNc(33,We,3,4,"span",9),e.YNc(34,et,5,3,"div",46),e.qZA(),e.TgZ(35,"div",42),e._UZ(36,"mat-checkbox",45),e.TgZ(37,"span"),e._uU(38," Entregada "),e.qZA(),e.YNc(39,tt,3,3,"span",9),e.YNc(40,it,3,4,"span",9),e.YNc(41,nt,5,3,"div",46),e.qZA(),e.YNc(42,ut,7,6,"div",47),e.qZA(),e.YNc(43,mt,5,1,"div",48),e.qZA()()()()()),2&i){const t=o.$implicit,s=e.oxw();e.xp6(2),e.Q6J("formGroup",s.selectedOrderForm),e.xp6(5),e.Q6J("ngIf",s.flashMessage),e.xp6(3),e.Q6J("color","primary")("checked",!0)("disabled",!0),e.xp6(3),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.createdAt),e.xp6(1),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.createdAt),e.xp6(2),e.Q6J("color","primary")("formControlName","payed"),e.xp6(3),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.payedAt),e.xp6(1),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.payedAt),e.xp6(2),e.Q6J("color","primary")("checked",s.ready)("formControlName","ready"),e.xp6(3),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.readyAt),e.xp6(1),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.readyAt),e.xp6(1),e.Q6J("ngIf",s.payed&&!s.canceled&&!s.shipped),e.xp6(2),e.Q6J("color","primary")("checked",s.shipped)("formControlName","shipped"),e.xp6(3),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.shippedAt),e.xp6(1),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.shippedAt),e.xp6(1),e.Q6J("ngIf",s.ready&&!s.canceled&&!s.delivered),e.xp6(2),e.Q6J("color","primary")("checked",s.delivered)("formControlName","delivered"),e.xp6(3),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.deliveredAt),e.xp6(1),e.Q6J("ngIf","0001-01-01T00:00:00"!==t.deliveredAt),e.xp6(1),e.Q6J("ngIf",s.shipped&&!s.canceled),e.xp6(1),e.Q6J("ngIf",!(s.ready||s.shipped||s.delivered)),e.xp6(1),e.Q6J("ngIf",s.canceled)}}function pt(i,o){1&i&&(e.TgZ(0,"div",75),e._uU(1,"\xa1No se ha generado ninguna orden!"),e.qZA())}let gt=(()=>{class i{constructor(t,s,r,n,a,d){this._changeDetectorRef=t,this._formBuilder=s,this._fileSaverService=r,this._ordersService=n,this._router=a,this.store=d,this.alertMessage=null,this.alertTitle=null,this.canceled=!1,this.delivered=!1,this.flashMessage=null,this.isLoading=!1,this.order=null,this.orders=[],this.orders$=(0,C.of)([]),this.payed=!1,this.ready=!1,this.roles=[],this.searchInputControl=new l.NI,this.selectedOrder=null,this.shipped=!1,this._unsubscribeAll=new O.x}ngOnInit(){this._ordersService.pagination$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.orders$=this.store.select(xe),this.orders$.subscribe(t=>this.orders=t),this.searchInputControl.valueChanges.pipe((0,g.R)(this._unsubscribeAll),(0,z.b)(900),(0,w.w)(t=>this._ordersService.getOrders(0,10,"orderNo","asc",t))).subscribe(),this.selectedOrderForm=this._formBuilder.group({_id:[null,l.kI.required],payed:[{value:this.payed,disabled:!0},l.kI.required],payedAt:[{value:null,disabled:!0},l.kI.required],ready:[{value:this.ready,disabled:!0},l.kI.required],readyAt:[{value:null,disabled:!0},l.kI.required],shipped:[{value:this.shipped,disabled:!0},l.kI.required],shippedAt:[{value:null,disabled:!0},l.kI.required],delivered:[{value:this.delivered,disabled:!0},l.kI.required],deliveredAt:[{value:null,disabled:!0},l.kI.required],canceled:[{value:this.canceled,disabled:!0},l.kI.required],canceledAt:[{value:null,disabled:!0},l.kI.required],cancelObs:[null],changeStateAt:[{value:null,disabled:!0},l.kI.required],status:[null,l.kI.required]})}ngAfterViewInit(){this._sort&&this._paginator&&(this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,g.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,ve.T)(this._sort.sortChange,this._paginator.page).pipe((0,w.w)(()=>(this.closeDetails(),this._ordersService.getOrders(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction)))).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDetails(){this.selectedOrder=null}exportAsExcelFile(){this._fileSaverService.exportAsExcelFile(this.orders,"orders")}exportAsCsvFile(){this._fileSaverService.exportAsCsvFile(this.orders,"orders")}toggleDetails(t){this.selectedOrder&&this.selectedOrder._id===t?this.closeDetails():this._ordersService.getOrderById(t).subscribe(s=>{this.selectedOrder=s,this.payed=s.payed,this.ready=s.ready,this.shipped=s.shipped,this.delivered=s.delivered,this.canceled=s.canceled,this.selectedOrderForm.patchValue(s),this._changeDetectorRef.markForCheck()})}setReadyStatus(){if(this.ready){if(this.shipped)return void this.showFlashMessage("error","Esta orden ha sido marcada como envidada");this.ready=!1}else this.ready=!0}saveReadyStatus(){let t;t=this.ready?"Lista":"Pagada",this._ordersService.updateOrderStatus({orderId:this.selectedOrder._id,ready:this.ready,status:t}).pipe((0,g.R)(this._unsubscribeAll)).subscribe(r=>{this.selectedOrder=r.updatedOrder,this.showFlashMessage("success","Nuevo estado de la orden actualizado en la base de datos, se notificar\xe1 al cliente en los pr\xf3ximos minutos"),this._changeDetectorRef.markForCheck()},r=>{this.alertTitle=`${r.status}: ${r.statusText}`,this.alertMessage=r.error.message?r.error.message:"Ha ocurrido un error inesperado, int\xe9ntelo nuevamente y si el error persiste contacte con el personal de soporte.",this.showFlashMessage("error",this.alertMessage),this._changeDetectorRef.markForCheck()})}setShippedStatus(){if(this.shipped){if(this.delivered)return void this.showFlashMessage("error","Esta orden ha sido marcada como entregada");this.shipped=!1}else this.shipped=!0}saveShippedStatus(){let t;t=this.shipped?"Transportando":"Lista",this._ordersService.updateOrderStatus({orderId:this.selectedOrder._id,shipped:this.shipped,status:t}).pipe((0,g.R)(this._unsubscribeAll)).subscribe(r=>{this.selectedOrder=r.updatedOrder,this.showFlashMessage("success","Nuevo estado de la orden actualizado en la base de datos, se notificar\xe1 al cliente en los pr\xf3ximos minutos"),this._changeDetectorRef.markForCheck()},r=>{this.alertTitle=`${r.status}: ${r.statusText}`,this.alertMessage=r.error.message?r.error.message:"Ha ocurrido un error inesperado, int\xe9ntelo nuevamente y si el error persiste contacte con el personal de soporte.",this.showFlashMessage("error",this.alertMessage),this._changeDetectorRef.markForCheck()})}setDeliveredStatus(){this.delivered=!this.delivered}saveDeliveredStatus(){let t;t=this.delivered?"Entregada":"Transportando",this._ordersService.updateOrderStatus({orderId:this.selectedOrder._id,delivered:this.delivered,status:t}).pipe((0,g.R)(this._unsubscribeAll)).subscribe(r=>{this.selectedOrder=r.updatedOrder,this.showFlashMessage("success","Nuevo estado de la orden actualizado en la base de datos, se notificar\xe1 al cliente en los pr\xf3ximos minutos"),this._changeDetectorRef.markForCheck()},r=>{this.alertTitle=`${r.status}: ${r.statusText}`,this.alertMessage=r.error.message?r.error.message:"Ha ocurrido un error inesperado, int\xe9ntelo nuevamente y si el error persiste contacte con el personal de soporte.",this.showFlashMessage("error",this.alertMessage),this._changeDetectorRef.markForCheck()})}setCanceledStatus(){this.delivered?this.showFlashMessage("error","Esta orden ya fue entregada"):this.canceled=!this.canceled}saveCanceledStatus(){const s=this.selectedOrderForm.getRawValue(),r={orderId:this.selectedOrder._id,canceled:this.canceled,cancelObs:s.cancelObs,status:"Cancelada"};this.delivered?this.showFlashMessage("error","Esta orden ya fue entregada"):null!==r.cancelObs?this._ordersService.updateOrderStatus(r).pipe((0,g.R)(this._unsubscribeAll)).subscribe(n=>{this.selectedOrder=n.updatedOrder,this.showFlashMessage("success","Nuevo estado de la orden actualizado en la base de datos, se notificar\xe1 al cliente en los pr\xf3ximos minutos"),this._changeDetectorRef.markForCheck()},n=>{this.alertTitle=`${n.status}: ${n.statusText}`,this.alertMessage=n.error.message?n.error.message:"Ha ocurrido un error inesperado, int\xe9ntelo nuevamente y si el error persiste contacte con el personal de soporte.",this.showFlashMessage("error",this.alertMessage),this._changeDetectorRef.markForCheck()}):this.showFlashMessage("error","Para realizar la cancelaci\xf3n deber\xe1 exponer el motivo")}showFlashMessage(t,s){this.flashMessage=t,this.alertMessage=s,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},5e3)}viewPurchaseOrder(t){this._router.navigateByUrl(`/selling/panels/orders/invoice/${t}`)}trackByFn(t,s){return s.id||t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(l.qu),e.Y36(Te.m),e.Y36(ye),e.Y36(y.F0),e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["selling-orders-list"]],viewQuery:function(t,s){if(1&t&&(e.Gf(qe,5),e.Gf(te.NW,5),e.Gf(P.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(s.htmlOrderList=r.first),e.iGM(r=e.CRH())&&(s._paginator=r.first),e.iGM(r=e.CRH())&&(s._sort=r.first)}},decls:16,vars:7,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["rowDetailsTemplate",""],["noOrders",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","orders-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"",3,"mat-sort-header"],[1,"hidden","text-center","md:block"],[1,"hidden","xl:block"],[1,"hidden","text-right","sm:block"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","orders-grid","md:px-8"],[1,""],[1,"hidden","text-center","truncate","md:block"],[1,"hidden","truncate","xl:block"],[1,"items-center","hidden","text-center","md:block"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase",3,"ngClass"],[1,"leading-relaxed","whitespace-nowrap"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","","matTooltip","Ver orden",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matTooltip","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"overflow-hidden","border-l","border-r","bg-gray-50"],[1,"flex","border-b"],[1,"flex","flex-col","w-full",3,"formGroup"],[1,"flex","flex-col","p-8","sm:flex-row"],[1,"flex","flex-col","w-full"],[1,"mb-5","font-semibold"],["class","flex items-center justify-center pb-5",4,"ngIf"],[1,"flex","flex-col","sm:flex-row","justify-evenly"],[1,"flex","flex-col","w-full","gap-2","text-center"],[3,"color","checked","disabled"],[3,"color","formControlName"],[3,"color","checked","formControlName"],["class","flex flex-col items-center justify-center gap-1 md:flex-row",4,"ngIf"],["class","flex flex-col w-full gap-2 text-center",4,"ngIf"],["class","flex items-center justify-center py-5",4,"ngIf"],[1,"flex","items-center","justify-center","pb-5"],[3,"type","appearance"],["fuseAlertTitle",""],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Establecer orden lista para recoger o entregar",3,"click",4,"ngIf"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Cancelar el estado de la orden",3,"click",4,"ngIf"],["mat-stroked-button","","matTooltip","Actualizar estado",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"text-blue-400","icon-size-5",3,"svgIcon"],["mat-stroked-button","","matTooltip","Establecer orden lista para recoger o entregar",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"text-green-400","icon-size-5",3,"svgIcon"],["mat-stroked-button","","matTooltip","Cancelar el estado de la orden",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"text-red-400","icon-size-5",3,"svgIcon"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Confirmar env\xedo",3,"click",4,"ngIf"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Cancelar confirmaci\xf3n de env\xedo",3,"click",4,"ngIf"],["mat-stroked-button","","matTooltip","Confirmar env\xedo",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-stroked-button","","matTooltip","Cancelar confirmaci\xf3n de env\xedo",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Confirmar entrega",3,"click",4,"ngIf"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Cancelar confirmaci\xf3n de entrega",3,"click",4,"ngIf"],["mat-stroked-button","","matTooltip","Confirmar entrega",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-stroked-button","","matTooltip","Cancelar confirmaci\xf3n de entrega",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Cancelar orden",3,"click",4,"ngIf"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Rechazar cancelaci\xf3n",3,"click",4,"ngIf"],["mat-stroked-button","","matTooltip","Cancelar orden",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-stroked-button","","matTooltip","Rechazar cancelaci\xf3n",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"flex","items-center","justify-center","py-5"],[1,"w-full","fuse-mat-textarea"],["matInput","",3,"formControlName"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"\xd3rdenes"),e.qZA(),e.TgZ(4,"div",3)(5,"mat-form-field",4),e._UZ(6,"mat-icon",5)(7,"input",6),e.qZA()()(),e.TgZ(8,"div",7)(9,"div",8),e.YNc(10,Me,2,2,"ng-container",9),e.ALo(11,"async"),e.YNc(12,ht,44,31,"ng-template",null,10,e.W1O),e.YNc(14,pt,2,0,"ng-template",null,11,e.W1O),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",s.searchInputControl)("autocomplete","off")("placeholder","Buscar \xf3rdenes"),e.xp6(3),e.Q6J("ngIf",e.lcZ(11,5,s.orders$)))},directives:[B.KE,A.Hw,B.qo,Ze.Nt,l.Fj,l.JJ,l.oH,v.O5,P.YE,P.nU,v.sg,v.mk,N.lW,ee.gM,v.tP,te.NW,l._Y,l.JL,l.sg,we.W,ke.oG,l.u,B.hX],pipes:[v.Ov,v.uU,v.JJ],styles:[".orders-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.orders-grid{grid-template-columns:48px auto 112px 72px}}@media (min-width: 960px){.orders-grid{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.orders-grid{grid-template-columns:48px 112px auto 112px 96px 96px 72px}}\n"],encapsulation:2,data:{animation:be.L},changeDetection:0}),i})(),ft=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-invoice"]],decls:2,vars:0,template:function(t,s){1&t&&(e.TgZ(0,"p"),e._uU(1,"invoice works!"),e.qZA())},encapsulation:2}),i})();var Z=c(7489);const re=i=>i.terms,k=((0,f.P1)(re,i=>i.terms),(0,f.P1)(re,i=>i.allTerms));var $=c(4787),D=c(1683),U=c(5586);const F=ie.N.API_URL;let Q=(()=>{class i{constructor(t,s){this._httpClient=t,this.store=s,this._paymentTerms=new J.X(null)}get paymentTerms$(){return this._paymentTerms.asObservable()}createTerms(t){return this.store.select(k).pipe((0,E.q)(1),(0,w.w)(s=>this._httpClient.post(`${F}/terms`,t).pipe((0,S.b)(r=>{this.store.dispatch((0,U.Sx)({allTerms:[r.terms,...s]}))}))))}getAllTerms(){return this._httpClient.get(`${F}/terms`).pipe((0,S.b)(({allTerms:t})=>{this.store.dispatch((0,U.Sx)({allTerms:t}))}))}getTermsById(t){return this._httpClient.get(`${F}/terms/${t}`).pipe((0,S.b)(({terms:s})=>{this.store.dispatch((0,U._s)({terms:s}))}))}updateTerms(t){return this.store.select(k).pipe((0,E.q)(1),(0,w.w)(s=>this._httpClient.patch(`${F}/terms/${t._id}`,t).pipe((0,R.U)(r=>{const n=s.findIndex(a=>a._id===t._id);return s[n]=r.terms,this.store.dispatch((0,U.Sx)({allTerms:s})),r}))))}deleteTerms(t){return this.store.select(k).pipe((0,E.q)(1),(0,w.w)(s=>this._httpClient.delete(`${F}/terms/${t}`).pipe((0,R.U)(r=>{const n=s.findIndex(a=>a._id===t);return s.splice(n,1),this.store.dispatch((0,U.Sx)({allTerms:s})),r}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(se.eN),e.LFG(f.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const _t=function(){return{height:"470px"}};let vt=(()=>{class i{constructor(t,s,r,n,a){this._changeDetectorRef=t,this._formBuilder=s,this._fuseConfirmationService=r,this._termsService=n,this.store=a,this.allTerms$=(0,C.of)([]),this.useTerms=null,this.user$=(0,C.of)(null),this.user=null,this.quillModules={toolbar:[[{font:[]}],[{color:[]}],[{align:[]}],["bold","italic","underline"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}]]},this._unsubscribeAll=new O.x}ngOnInit(){this.user$=this.store.select($.rk),this.user$.subscribe(t=>this.user=t),this.composeForm=this._formBuilder.group({_id:[null],user:[this.user._id,[l.kI.required]],active:[!0,[l.kI.required]],content:["",[l.kI.required]],type:["use-terms",[l.kI.required]]}),this.allTerms$=this.store.select(k),this.allTerms$.subscribe(t=>{this.useTerms=t.find(s=>"use-terms"===s.type),this.composeForm.patchValue(this.useTerms)})}saveTerms(){this.useTerms?this._updateTerms():this._createTerms()}_createTerms(){let t=this.composeForm.getRawValue();t=(0,Z.omit)(t,["_id"]),console.log(t),this._fuseConfirmationService.open({title:"Guardar t\xe9rminos de uso",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._termsService.createTerms(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(n=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:n.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},n=>{this._fuseConfirmationService.open({title:`${n.statusText}: ${n.status}`,message:n.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}_updateTerms(){let t=this.composeForm.getRawValue();t=(0,Z.omit)(t,["_id"]),this._fuseConfirmationService.open({title:"Actualizar t\xe9rminos de uso",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._termsService.updateTerms(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(n=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:n.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},n=>{this._fuseConfirmationService.open({title:`${n.statusText}: ${n.status}`,message:n.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(l.qu),e.Y36(D.R),e.Y36(Q),e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["selling-use-terms"]],decls:31,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/home",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/selling/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"bg-gradient-to-r","from-primary-500","to-primary-600","text-white",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1","text-white","hidden","sm:block"],[1,"flex","flex-auto","flex-col","md:flex-row","p-6","md:p-8","space-y-8","space-x-8"],[1,"w-full","md:w-1/2"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto",3,"formGroup"],[3,"formControlName","styles","modules"],[1,"w-full","md:w-1/2","max-w-3xl","md:max-h-128","sm:my-2","p-6","rounded-2xl","shadow","overflow-y-scroll","bg-card","border","border-gray-100"],[1,"border-b","border-gray-400","mb-5","text-xl","font-semibold"],[1,"prose","prose-md","max-w-prose",3,"innerHTML"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Ventas"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"T\xe9rminos de Uso"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," T\xe9rminos de Uso "),e.qZA()()(),e.TgZ(18,"div",11)(19,"button",12),e.NdJ("click",function(){return s.saveTerms()}),e._UZ(20,"mat-icon",13),e.TgZ(21,"span",14),e._uU(22,"Guardar"),e.qZA()()()(),e.TgZ(23,"div",15)(24,"div",16)(25,"form",17),e._UZ(26,"quill-editor",18),e.qZA()(),e.TgZ(27,"div",19)(28,"div",20),e._uU(29," Vista previa "),e.qZA(),e._UZ(30,"div",21),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:save"),e.xp6(5),e.Q6J("formGroup",s.composeForm),e.xp6(1),e.Q6J("formControlName","content")("styles",e.DdM(8,_t))("modules",s.quillModules),e.xp6(4),e.Q6J("innerHTML",s.composeForm.get("content").value,e.oJD))},directives:[y.yS,A.Hw,N.lW,l._Y,l.JL,l.sg,H,l.JJ,l.u],styles:[".ql-editor{min-height:500px!important;max-height:500px!important;height:500px!important}\n"],encapsulation:2}),i})();const xt=function(){return{height:"470px"}};let bt=(()=>{class i{constructor(t,s,r,n,a){this._changeDetectorRef=t,this._formBuilder=s,this._fuseConfirmationService=r,this._termsService=n,this.store=a,this.allTerms$=(0,C.of)([]),this.useTerms=null,this.user$=(0,C.of)(null),this.user=null,this.quillModules={toolbar:[[{font:[]}],[{color:[]}],[{align:[]}],["bold","italic","underline"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}]]},this._unsubscribeAll=new O.x}ngOnInit(){this.user$=this.store.select($.rk),this.user$.subscribe(t=>this.user=t),this.composeForm=this._formBuilder.group({_id:[null],user:[this.user._id,[l.kI.required]],active:[!0,[l.kI.required]],content:["",[l.kI.required]],type:["payment-terms",[l.kI.required]]}),this.allTerms$=this.store.select(k),this.allTerms$.subscribe(t=>{this.useTerms=t.find(s=>"payment-terms"===s.type),this.composeForm.patchValue(this.useTerms)})}saveTerms(){this.useTerms?this._updateTerms():this._createTerms()}_createTerms(){let t=this.composeForm.getRawValue();t=(0,Z.omit)(t,["_id"]),this._fuseConfirmationService.open({title:"Guardar t\xe9rminos de pago",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._termsService.createTerms(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(n=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:n.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},n=>{this._fuseConfirmationService.open({title:`${n.statusText}: ${n.status}`,message:n.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}_updateTerms(){let t=this.composeForm.getRawValue();t=(0,Z.omit)(t,["_id"]),this._fuseConfirmationService.open({title:"Actualizar t\xe9rminos de pago",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._termsService.updateTerms(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(n=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:n.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},n=>{this._fuseConfirmationService.open({title:`${n.statusText}: ${n.status}`,message:n.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(l.qu),e.Y36(D.R),e.Y36(Q),e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["selling-payment-terms"]],decls:31,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/home",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/selling/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"bg-gradient-to-r","from-primary-500","to-primary-600","text-white",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1","text-white","hidden","sm:block"],[1,"flex","flex-auto","flex-col","md:flex-row","p-6","md:p-8","space-y-8","space-x-8"],[1,"w-full","md:w-1/2"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto",3,"formGroup"],[3,"formControlName","styles","modules"],[1,"w-full","md:w-1/2","max-w-3xl","md:max-h-128","sm:my-2","p-6","rounded-2xl","shadow","overflow-y-scroll","bg-card","border","border-gray-100"],[1,"border-b","border-gray-400","mb-5","text-xl","font-semibold"],[1,"prose","prose-md","max-w-prose",3,"innerHTML"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Ventas"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"T\xe9rminos de Pago"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," T\xe9rminos de Pago "),e.qZA()()(),e.TgZ(18,"div",11)(19,"button",12),e.NdJ("click",function(){return s.saveTerms()}),e._UZ(20,"mat-icon",13),e.TgZ(21,"span",14),e._uU(22,"Guardar"),e.qZA()()()(),e.TgZ(23,"div",15)(24,"div",16)(25,"form",17),e._UZ(26,"quill-editor",18),e.qZA()(),e.TgZ(27,"div",19)(28,"div",20),e._uU(29," Vista previa "),e.qZA(),e._UZ(30,"div",21),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:save"),e.xp6(5),e.Q6J("formGroup",s.composeForm),e.xp6(1),e.Q6J("formControlName","content")("styles",e.DdM(8,xt))("modules",s.quillModules),e.xp6(4),e.Q6J("innerHTML",s.composeForm.get("content").value,e.oJD))},directives:[y.yS,A.Hw,N.lW,l._Y,l.JL,l.sg,H,l.JJ,l.u],styles:[".ql-editor{min-height:500px!important;max-height:500px!important;height:500px!important}\n"],encapsulation:2}),i})();const Tt=function(){return{height:"470px"}},Ct=[{path:"",pathMatch:"full",redirectTo:"panels"},{path:"panels",component:ge,resolve:{allTerms:(()=>{class i{constructor(t){this._termsService=t}resolve(t,s){return this._termsService.getAllTerms()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Q))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},children:[{path:"",component:fe},{path:"use-terms",component:vt},{path:"payment-terms",component:bt},{path:"return-policy",component:(()=>{class i{constructor(t,s,r,n,a){this._changeDetectorRef=t,this._formBuilder=s,this._fuseConfirmationService=r,this._termsService=n,this.store=a,this.allTerms$=(0,C.of)([]),this.useTerms=null,this.user$=(0,C.of)(null),this.user=null,this.quillModules={toolbar:[[{font:[]}],[{color:[]}],[{align:[]}],["bold","italic","underline"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}]]},this._unsubscribeAll=new O.x}ngOnInit(){this.user$=this.store.select($.rk),this.user$.subscribe(t=>this.user=t),this.composeForm=this._formBuilder.group({_id:[null],user:[this.user._id,[l.kI.required]],active:[!0,[l.kI.required]],content:["",[l.kI.required]],type:["return-policy",[l.kI.required]]}),this.allTerms$=this.store.select(k),this.allTerms$.subscribe(t=>{this.useTerms=t.find(s=>"return-policy"===s.type),this.composeForm.patchValue(this.useTerms)})}saveTerms(){this.useTerms?this._updateTerms():this._createTerms()}_createTerms(){let t=this.composeForm.getRawValue();t=(0,Z.omit)(t,["_id"]),this._fuseConfirmationService.open({title:"Guardar pol\xedtica de devoluciones",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._termsService.createTerms(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(n=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:n.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},n=>{this._fuseConfirmationService.open({title:`${n.statusText}: ${n.status}`,message:n.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}_updateTerms(){let t=this.composeForm.getRawValue();t=(0,Z.omit)(t,["_id"]),this._fuseConfirmationService.open({title:"Actualizar pol\xedtica de devoluciones",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._termsService.updateTerms(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(n=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:n.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},n=>{this._fuseConfirmationService.open({title:`${n.statusText}: ${n.status}`,message:n.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(l.qu),e.Y36(D.R),e.Y36(Q),e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["selling-return-policy"]],decls:31,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/home",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/selling/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"bg-gradient-to-r","from-primary-500","to-primary-600","text-white",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1","text-white","hidden","sm:block"],[1,"flex","flex-auto","flex-col","md:flex-row","p-6","md:p-8","space-y-8","space-x-8"],[1,"w-full","md:w-1/2"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto",3,"formGroup"],[3,"formControlName","styles","modules"],[1,"w-full","md:w-1/2","max-w-3xl","md:max-h-128","sm:my-2","p-6","rounded-2xl","shadow","overflow-y-scroll","bg-card","border","border-gray-100"],[1,"border-b","border-gray-400","mb-5","text-xl","font-semibold"],[1,"prose","prose-md","max-w-prose",3,"innerHTML"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Ventas"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Pol\xedtica de Devoluciones"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Pol\xedtica de Devoluciones "),e.qZA()()(),e.TgZ(18,"div",11)(19,"button",12),e.NdJ("click",function(){return s.saveTerms()}),e._UZ(20,"mat-icon",13),e.TgZ(21,"span",14),e._uU(22,"Guardar"),e.qZA()()()(),e.TgZ(23,"div",15)(24,"div",16)(25,"form",17),e._UZ(26,"quill-editor",18),e.qZA()(),e.TgZ(27,"div",19)(28,"div",20),e._uU(29," Vista previa "),e.qZA(),e._UZ(30,"div",21),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:save"),e.xp6(5),e.Q6J("formGroup",s.composeForm),e.xp6(1),e.Q6J("formControlName","content")("styles",e.DdM(8,Tt))("modules",s.quillModules),e.xp6(4),e.Q6J("innerHTML",s.composeForm.get("content").value,e.oJD))},directives:[y.yS,A.Hw,N.lW,l._Y,l.JL,l.sg,H,l.JJ,l.u],styles:[".ql-editor{min-height:500px!important;max-height:500px!important;height:500px!important}\n"],encapsulation:2}),i})()},{path:"cookies-policy",component:(()=>{class i{constructor(t,s,r,n,a){this._changeDetectorRef=t,this._formBuilder=s,this._fuseConfirmationService=r,this._termsService=n,this.store=a,this.allTerms$=(0,C.of)([]),this.useTerms=null,this.user$=(0,C.of)(null),this.user=null,this.quillModules={toolbar:[[{font:[]}],[{color:[]}],[{align:[]}],["bold","italic","underline"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}]]},this._unsubscribeAll=new O.x}ngOnInit(){this.user$=this.store.select($.rk),this.user$.subscribe(t=>this.user=t),this.composeForm=this._formBuilder.group({_id:[null],user:[this.user._id,[l.kI.required]],active:[!0,[l.kI.required]],content:["",[l.kI.required]],type:["cookies-policy",[l.kI.required]]}),this.allTerms$=this.store.select(k),this.allTerms$.subscribe(t=>{this.useTerms=t.find(s=>"cookies-policy"===s.type),this.composeForm.patchValue(this.useTerms)})}saveTerms(){this.useTerms?this._updateTerms():this._createTerms()}_createTerms(){let t=this.composeForm.getRawValue();t=(0,Z.omit)(t,["_id"]),this._fuseConfirmationService.open({title:"Guardar pol\xedtica de cookies",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._termsService.createTerms(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(n=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:n.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},n=>{this._fuseConfirmationService.open({title:`${n.statusText}: ${n.status}`,message:n.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}_updateTerms(){let t=this.composeForm.getRawValue();t=(0,Z.omit)(t,["_id"]),this._fuseConfirmationService.open({title:"Actualizar pol\xedtica de cookies",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._termsService.updateTerms(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(n=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:n.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},n=>{this._fuseConfirmationService.open({title:`${n.statusText}: ${n.status}`,message:n.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(l.qu),e.Y36(D.R),e.Y36(Q),e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["selling-cookies-policy"]],decls:2,vars:0,template:function(t,s){1&t&&(e.TgZ(0,"p"),e._uU(1,"cookies-policy works!"),e.qZA())},styles:[".ql-editor{min-height:500px!important;max-height:500px!important;height:500px!important}\n"],encapsulation:2}),i})()},{path:"orders",component:_e,children:[{path:"",component:gt},{path:"invoice/:orderId",component:ft}]}]}];let yt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[y.Bz.forChild(Ct),pe.m,he.forRoot()]]}),i})()}}]);