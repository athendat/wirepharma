"use strict";(self.webpackChunkwirepharma=self.webpackChunkwirepharma||[]).push([[333],{5333:(fo,L,a)=>{a.r(L),a.d(L,{RolesModule:()=>co});var B=a(5357),be=a(499),p=a(3075),Ze=a(6087),S=a(4847),Y=a(7579),$=a(9646),y=a(2722),Ce=a(8372),ye=a(3900),Ae=a(8288),F=a(8966),Te=a(7585),Ie=a(139),P=a(4157);var H=a(8706);const G=function De(n,o){return function(t,i){if(null==t)return t;if(!(0,H.Z)(t))return n(t,i);for(var s=t.length,r=o?s:-1,l=Object(t);(o?r--:++r<s)&&!1!==i(l[r],r,l););return t}}(function we(n,o){return n&&(0,Ie.Z)(n,o,P.Z)});var q=a(9940);var Z=a(4177);const A=function Pe(n,o){return((0,Z.Z)(n)?Te.Z:G)(n,function Se(n){return"function"==typeof n?n:q.Z}(o))};var T=a(5343),Ee=a(3639);function I(n){var o=-1,t=null==n?0:n.length;for(this.__data__=new Ee.Z;++o<t;)this.add(n[o])}I.prototype.add=I.prototype.push=function Qe(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},I.prototype.has=function Ue(n){return this.__data__.has(n)};const Be=I,W=function Ye(n,o){for(var t=-1,i=null==n?0:n.length;++t<i;)if(o(n[t],t,n))return!0;return!1},He=function $e(n,o){return n.has(o)},K=function We(n,o,t,i,s,r){var l=1&t,d=n.length,c=o.length;if(d!=c&&!(l&&c>d))return!1;var u=r.get(n),f=r.get(o);if(u&&f)return u==o&&f==n;var g=-1,m=!0,x=2&t?new Be:void 0;for(r.set(n,o),r.set(o,n);++g<d;){var h=n[g],_=o[g];if(i)var v=l?i(_,h,g,o,n,r):i(h,_,g,n,o,r);if(void 0!==v){if(v)continue;m=!1;break}if(x){if(!W(o,function(R,b){if(!He(x,b)&&(h===R||s(h,R,t,i,r)))return x.push(b)})){m=!1;break}}else if(h!==_&&!s(h,_,t,i,r)){m=!1;break}}return r.delete(n),r.delete(o),m};var X=a(8492),k=a(1630),Ke=a(3093);const ke=function Xe(n){var o=-1,t=Array(n.size);return n.forEach(function(i,s){t[++o]=[s,i]}),t},je=function ze(n){var o=-1,t=Array(n.size);return n.forEach(function(i){t[++o]=i}),t};var z=X.Z?X.Z.prototype:void 0,E=z?z.valueOf:void 0;var j=a(8501),_n=Object.prototype.hasOwnProperty;var V=a(4116),ee=a(5202),Rn=a(7583),ne="[object Arguments]",te="[object Array]",w="[object Object]",oe=Object.prototype.hasOwnProperty;const yn=function Cn(n,o,t,i,s,r){var l=(0,Z.Z)(n),d=(0,Z.Z)(o),c=l?te:(0,V.Z)(n),u=d?te:(0,V.Z)(o),f=(c=c==ne?w:c)==w,g=(u=u==ne?w:u)==w,m=c==u;if(m&&(0,ee.Z)(n)){if(!(0,ee.Z)(o))return!1;l=!0,f=!1}if(m&&!f)return r||(r=new T.Z),l||(0,Rn.Z)(n)?K(n,o,t,i,s,r):function un(n,o,t,i,s,r,l){switch(t){case"[object DataView]":if(n.byteLength!=o.byteLength||n.byteOffset!=o.byteOffset)return!1;n=n.buffer,o=o.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=o.byteLength||!r(new k.Z(n),new k.Z(o)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,Ke.Z)(+n,+o);case"[object Error]":return n.name==o.name&&n.message==o.message;case"[object RegExp]":case"[object String]":return n==o+"";case"[object Map]":var d=ke;case"[object Set]":if(d||(d=je),n.size!=o.size&&!(1&i))return!1;var u=l.get(n);if(u)return u==o;i|=2,l.set(n,o);var f=K(d(n),d(o),i,s,r,l);return l.delete(n),f;case"[object Symbol]":if(E)return E.call(n)==E.call(o)}return!1}(n,o,c,t,i,s,r);if(!(1&t)){var x=f&&oe.call(n,"__wrapped__"),h=g&&oe.call(o,"__wrapped__");if(x||h){var _=x?n.value():n,v=h?o.value():o;return r||(r=new T.Z),s(_,v,t,i,r)}}return!!m&&(r||(r=new T.Z),function xn(n,o,t,i,s,r){var l=1&t,d=(0,j.Z)(n),c=d.length;if(c!=(0,j.Z)(o).length&&!l)return!1;for(var g=c;g--;){var m=d[g];if(!(l?m in o:_n.call(o,m)))return!1}var x=r.get(n),h=r.get(o);if(x&&h)return x==o&&h==n;var _=!0;r.set(n,o),r.set(o,n);for(var v=l;++g<c;){var R=n[m=d[g]],b=o[m];if(i)var Re=l?i(b,R,m,o,n,r):i(R,b,m,n,o,r);if(!(void 0===Re?R===b||s(R,b,t,i,r):Re)){_=!1;break}v||(v="constructor"==m)}if(_&&!v){var D=n.constructor,O=o.constructor;D!=O&&"constructor"in n&&"constructor"in o&&!("function"==typeof D&&D instanceof D&&"function"==typeof O&&O instanceof O)&&(_=!1)}return r.delete(n),r.delete(o),_}(n,o,t,i,s,r))};var ie=a(214);const re=function se(n,o,t,i,s){return n===o||(null==n||null==o||!(0,ie.Z)(n)&&!(0,ie.Z)(o)?n!=n&&o!=o:yn(n,o,t,i,se,s))};var N=a(1999);const ae=function Mn(n){return n==n&&!(0,N.Z)(n)},le=function Sn(n,o){return function(t){return null!=t&&t[n]===o&&(void 0!==o||n in Object(t))}},Pn=function Fn(n){var o=function Dn(n){for(var o=(0,P.Z)(n),t=o.length;t--;){var i=o[t],s=n[i];o[t]=[i,s,ae(s)]}return o}(n);return 1==o.length&&o[0][2]?le(o[0][0],o[0][1]):function(t){return t===n||function In(n,o,t,i){var s=t.length,r=s,l=!i;if(null==n)return!r;for(n=Object(n);s--;){var d=t[s];if(l&&d[2]?d[1]!==n[d[0]]:!(d[0]in n))return!1}for(;++s<r;){var c=(d=t[s])[0],u=n[c],f=d[1];if(l&&d[2]){if(void 0===u&&!(c in n))return!1}else{var g=new T.Z;if(i)var m=i(u,f,c,n,o,g);if(!(void 0===m?re(f,u,3,i,g):m))return!1}}return!0}(t,n,o)}};var ce=a(7298);const Jn=function Qn(n,o){return null!=n&&o in Object(n)};var Un=a(7370),Ln=a(4825),Bn=a(6667),Yn=a(8696),Q=a(2168);const qn=function Gn(n,o){return null!=n&&function $n(n,o,t){for(var i=-1,s=(o=(0,Un.Z)(o,n)).length,r=!1;++i<s;){var l=(0,Q.Z)(o[i]);if(!(r=null!=n&&t(n,l)))break;n=n[l]}return r||++i!=s?r:!!(s=null==n?0:n.length)&&(0,Yn.Z)(s)&&(0,Bn.Z)(l,s)&&((0,Z.Z)(n)||(0,Ln.Z)(n))}(n,o,Jn)};var de=a(3660);const kn=function Xn(n,o){return(0,de.Z)(n)&&ae(o)?le((0,Q.Z)(n),o):function(t){var i=function En(n,o,t){var i=null==n?void 0:(0,ce.Z)(n,o);return void 0===i?t:i}(t,n);return void 0===i&&i===o?qn(t,n):re(o,i,3)}},tt=function nt(n){return(0,de.Z)(n)?function zn(n){return function(o){return null==o?void 0:o[n]}}((0,Q.Z)(n)):function Vn(n){return function(o){return(0,ce.Z)(o,n)}}(n)},J=function ot(n){return"function"==typeof n?n:null==n?q.Z:"object"==typeof n?(0,Z.Z)(n)?kn(n[0],n[1]):Pn(n):tt(n)};var lt=/\s/;var ft=/^\s+/;const ut=function mt(n){return n&&n.slice(0,function ct(n){for(var o=n.length;o--&&lt.test(n.charAt(o)););return o}(n)+1).replace(ft,"")};var gt=a(6460),pt=/^[-+]0x[0-9a-f]+$/i,ht=/^0b[01]+$/i,_t=/^0o[0-7]+$/i,xt=parseInt;const Ct=function Zt(n){return n?1/0===(n=function vt(n){if("number"==typeof n)return n;if((0,gt.Z)(n))return NaN;if((0,N.Z)(n)){var o="function"==typeof n.valueOf?n.valueOf():n;n=(0,N.Z)(o)?o+"":o}if("string"!=typeof n)return 0===n?n:+n;n=ut(n);var t=ht.test(n);return t||_t.test(n)?xt(n.slice(2),t?2:8):pt.test(n)?NaN:+n}(n))||-1/0===n?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0};var Tt=Math.max;const ue=function it(n){return function(o,t,i){var s=Object(o);if(!(0,H.Z)(o)){var r=J(t);o=(0,P.Z)(o),t=function(d){return r(s[d],d,s)}}var l=n(o,t,i);return l>-1?s[r?o[l]:l]:void 0}}(function It(n,o,t){var i=null==n?0:n.length;if(!i)return-1;var s=null==t?0:function yt(n){var o=Ct(n),t=o%1;return o==o?t?o-t:o:0}(t);return s<0&&(s=Tt(i+s,0)),function rt(n,o,t,i){for(var s=n.length,r=t+(i?1:-1);i?r--:++r<s;)if(o(n[r],r,n))return r;return-1}(n,J(o),s)}),Dt=function Mt(n,o){var t;return G(n,function(i,s,r){return!(t=o(i,s,r))}),!!t};var Ot=a(4810);var Pt=a(5119);class U{clear(){this._id=null,this.name="",this.permissions=[],this.isCoreRole=!1,this.checked=!1}}class ge{clear(){this._id=void 0,this.title="",this.level=1,this.parentId=void 0,this.isSelected=!1,this.name="",this._children=[]}}var e=a(5e3),pe=a(1683),he=a(1349),C=a(9808),M=a(7322),_e=a(5245),xe=a(7531),Et=a(7446),ve=a(7423);function Nt(n,o){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Agregar rol "),e.qZA())}function Qt(n,o){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Editar rol "),e.qZA())}function Jt(n,o){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Detalles del rol "),e.qZA())}function Ut(n,o){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()(),e.TgZ(9,"div",15)(10,"h6",13),e._uU(11,"Descripci\xf3n"),e.qZA(),e.TgZ(12,"span",14),e._uU(13),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(8),e.Oqu(t.data.role.name||"Sin nombre"),e.xp6(5),e.Oqu(t.data.role.description||"Sin descripci\xf3n")}}function Lt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",35)(1,"span")(2,"mat-checkbox",36),e.NdJ("ngModelChange",function(s){return e.CHM(t).$implicit.isSelected=s})("change",function(s){const l=e.CHM(t).$implicit;return e.oxw(3).isSelectedChanged(s,l)}),e._uU(3),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.oxw(3);e.xp6(2),e.Q6J("color","primary")("ngModel",t.isSelected)("disabled",i.singleRole.isCoreRole),e.xp6(1),e.hij(" ",t.title," ")}}function Bt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"mat-checkbox",33),e.NdJ("ngModelChange",function(s){return e.CHM(t).$implicit.isSelected=s})("change",function(s){const l=e.CHM(t).$implicit;return e.oxw(2).isSelectedChanged(s,l)}),e.qZA()(),e.YNc(5,Lt,4,4,"div",34),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(2);e.xp6(3),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngModel",t.isSelected)("disabled",i.singleRole.isCoreRole),e.xp6(1),e.Q6J("ngForOf",t._children)}}function Yt(n,o){if(1&n&&(e.TgZ(0,"div",16)(1,"div",17)(2,"form",18)(3,"div",19)(4,"mat-form-field",20)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"mat-icon",21)(8,"input",22),e.qZA()(),e.TgZ(9,"div",23)(10,"mat-form-field",20)(11,"mat-label"),e._uU(12,"Descripci\xf3n"),e.qZA(),e._UZ(13,"mat-icon",24)(14,"textarea",25),e.qZA()()(),e.TgZ(15,"div",26)(16,"div",27)(17,"mat-label",28),e._uU(18,"Permisos"),e.qZA()(),e.TgZ(19,"div",29),e.YNc(20,Bt,6,4,"div",30),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.roleForm)("autocomplete","off"),e.xp6(5),e.Q6J("svgIcon","heroicons_outline:pencil-alt"),e.xp6(1),e.Q6J("type","text")("formControlName","name")("placeholder","Nombre del rol"),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",3)("spellcheck",!1),e.xp6(6),e.Q6J("ngForOf",t.rolePermissions)}}function $t(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateRole()}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.roleForm.disabled||t.roleForm.invalid)("color","primary")("matDialogClose","confirmed")}}function Ht(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).createRole()}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.roleForm.disabled||t.roleForm.invalid)("color","primary")("matDialogClose","confirmed")}}function Gt(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",37),e.ynx(2),e.TgZ(3,"button",38),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,$t,3,3,"ng-container",6),e.YNc(6,Ht,3,3,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let qt=(()=>{class n{constructor(t,i,s,r,l){this.data=t,this._changeDetectorRef=i,this._formBuilder=s,this._fuseConfirmationService=r,this._roleService=l,this.singleRole=new U,this.dialogMode="view",this.rolePermissions=[],this._unsubscribeAll=new Y.x}ngOnInit(){this.singleRole.clear(),this.roleForm=this._formBuilder.group({_id:[""],isCoreRole:[!1],name:["",[p.kI.required]],description:["",[p.kI.required,p.kI.minLength(8)]]}),"edit"===this.data.dialogMode&&(this.singleRole=this.data.singleRole,this.roleForm.patchValue(this.data.singleRole)),this.allPermissions$=this._roleService.permissions$,this.loadPermissions()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadPermissions(){this.allPermissions$.subscribe(t=>{t&&t.filter(s=>s.parentId===s._id).forEach(s=>{const r=this.singleRole.permissions.some(c=>c===s._id),l=new ge;l.clear(),l.isSelected=r,l._children=[],l._id=s._id,l.level=s.level,l.parentId=s.parentId,l.title=s.title,t.filter(c=>c.parentId&&c.parentId===s._id).forEach(c=>{if(c._id!==c.parentId){const u=this.singleRole.permissions.some(g=>g===c._id),f=new ge;f.clear(),f.isSelected=u,f._children=[],f._id=c._id,f.level=c.level,f.parentId=c.parentId,f.title=c.title,l._children.push(f)}}),this.rolePermissions.push(l)})}),console.table(this.rolePermissions)}preparePermissionIds(){const t=[];return A(this.rolePermissions,i=>{i.isSelected&&(t.push(i._id),A(i._children,s=>{s.isSelected&&t.push(s._id)}))}),t}prepareRole(){const t=new U;return t._id=this.singleRole._id,t.permissions=this.preparePermissionIds(),t.name=this.singleRole.name,t.isCoreRole=this.singleRole.isCoreRole,t}isSelectedChanged(t,i){if(0===i._children.length&&i.isSelected){const s=ue(this.rolePermissions,r=>r._id===i.parentId);s&&!s.isSelected&&(s.isSelected=!0)}else if(0!==i._children.length||i.isSelected)i._children.length>0&&i.isSelected?A(i._children,s=>s.isSelected=!0):i._children.length>0&&!i.isSelected&&A(i._children,s=>{s.isSelected=!1});else{const s=ue(this.rolePermissions,r=>r._id===i.parentId);s&&s.isSelected&&(function St(n,o,t){var i=(0,Z.Z)(n)?W:Dt;return t&&(0,Ot.Z)(n,o,t)&&(o=void 0),i(n,J(o))}(s._children,r=>!0===r.isSelected)||(s.isSelected=!1))}}createRole(){let t=this.roleForm.getRawValue();t=(0,Pt.Z)(t,"id"),t.permissions=this.prepareRole().permissions,this._fuseConfirmationService.open({title:"Crear Rol",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(s=>{"confirmed"===s&&this._roleService.createRole(t).pipe((0,y.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Rol creado correctamente",message:r.name,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateRole(){const t=this.roleForm.getRawValue();t.permissions=this.prepareRole().permissions,this._fuseConfirmationService.open({title:"Actualizar Rol",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(s=>{"confirmed"===s&&this._roleService.updateRole(t).pipe((0,y.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Rol actualizado correctamente",message:r.name,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(F.WI),e.Y36(e.sBO),e.Y36(p.qu),e.Y36(pe.R),e.Y36(he.N))},n.\u0275cmp=e.Xpm({type:n,selectors:[["roles-dialog"]],decls:12,vars:6,consts:[[1,"relative","flex","flex-col","w-full","h-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","pb-6","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:pb-6","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","sm:flex-row","sm:items-start"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","pb-4","my-10"],[1,"w-full","overflow-hidden"],[1,"flex",2,"flex-direction","column"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"sm:col-span-3"],[1,"w-full","fuse-mat-no-subscript"],[1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","required","",2,"margin-left","6px",3,"type","formControlName","placeholder"],[1,"py-5","sm:col-span-2"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","","required","",3,"formControlName","rows","spellcheck"],[2,"margin-top","10px","margin-bottom","20px"],[2,"margin-bottom","12px"],[1,"font-medium"],[2,"border-width","1.5px","border-radius","6px","--tw-border-opacity","1 !important","border-color","#3bbf44","padding","20px 25px 0 20px","--tw-shadow","0 0 #f000","box-shadow","0 4px 8px 0 rgba(0, 0, 0, 0.02)"],["style","display: grid; margin-bottom: 25px;\n                            grid-template-columns: 150px auto auto auto auto;",4,"ngFor","ngForOf"],[2,"display","grid","margin-bottom","25px","grid-template-columns","150px auto auto auto auto"],[2,"display","flex","justify-content","space-between"],[3,"ngModel","disabled","ngModelChange","change"],["style","display: flex; justify-content: space-around;",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","space-around"],[2,"opacity","0.8",3,"color","ngModel","disabled","ngModelChange","change"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",1,"rounded-sm","text-mine-900","bg-primary-700",3,"matDialogClose"],["mat-flat-button","",1,"rounded-sm","text-mine-900","bg-primary-700",3,"disabled","color","matDialogClose","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,Nt,2,0,"h2",2),e.YNc(4,Qt,2,0,"h2",2),e.YNc(5,Jt,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(6,"div",3),e.ynx(7),e.YNc(8,Ut,14,2,"div",4),e.BQk(),e.ynx(9),e.YNc(10,Yt,21,11,"div",5),e.BQk(),e.qZA(),e.YNc(11,Gt,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",null===i.data.singleRole._id&&"add"===i.data.dialogMode),e.xp6(1),e.Q6J("ngIf",i.data.singleRole._id&&"edit"===i.data.dialogMode),e.xp6(1),e.Q6J("ngIf",i.data.singleRole._id&&"view"===i.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===i.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===i.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==i.data.dialogMode))},directives:[C.O5,p._Y,p.JL,p.sg,M.KE,M.hX,_e.Hw,xe.Nt,p.Fj,p.Q7,p.JJ,p.u,M.qo,C.sg,Et.oG,p.On,ve.lW,F.ZT],encapsulation:2,changeDetection:0}),n})();var Wt=a(393),Kt=a(9602),Xt=a(7238);function kt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().createRole()}),e._UZ(1,"mat-icon",26),e.TgZ(2,"span",27),e._uU(3,"Nuevo Rol"),e.qZA()()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"))}function zt(n,o){1&n&&e._UZ(0,"mat-icon",39),2&n&&e.Q6J("color","primary")}function jt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2).$implicit;return e.oxw(3).updateRole(s)}),e._UZ(1,"mat-icon",44),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil"))}function Vt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2).$implicit;return e.oxw(3).deleteRole(s)}),e._UZ(1,"mat-icon",44),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:trash"))}function eo(n,o){1&n&&(e.TgZ(0,"button",45),e._UZ(1,"mat-icon",44),e.qZA()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:eye"))}const no=function(){return["ManagementUpdate","ManagementDelete"]};function to(n,o){1&n&&(e.TgZ(0,"div",40),e.YNc(1,jt,2,1,"button",41),e.YNc(2,Vt,2,1,"button",41),e.YNc(3,eo,2,1,"button",42),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngxPermissionsOnly","ManagementUpdate"),e.xp6(1),e.Q6J("ngxPermissionsOnly","ManagementDelete"),e.xp6(1),e.Q6J("ngxPermissionsExcept",e.DdM(3,no)))}function oo(n,o){1&n&&(e.TgZ(0,"div",40)(1,"button",45),e._UZ(2,"mat-icon",44),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("svgIcon","heroicons_solid:eye"))}function io(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",34)(2,"div",35),e.YNc(3,zt,1,1,"mat-icon",36),e._uU(4),e.qZA(),e.TgZ(5,"div",37),e._uU(6),e.qZA(),e.YNc(7,to,4,4,"div",38),e.YNc(8,oo,3,1,"div",38),e.qZA(),e.BQk()),2&n){const t=o.$implicit;e.xp6(3),e.Q6J("ngIf",t.isCoreRole),e.xp6(1),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.description," "),e.xp6(1),e.Q6J("ngIf",!t.isCoreRole),e.xp6(1),e.Q6J("ngIf",t.isCoreRole)}}function so(n,o){if(1&n&&(e.ynx(0),e.YNc(1,io,9,5,"ng-container",33),e.BQk()),2&n){const t=o.ngIf,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}function ro(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",28)(2,"div",29)(3,"div",30),e._uU(4," Nombre "),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Descripci\xf3n"),e.qZA(),e.TgZ(7,"div",31),e._uU(8,"Acci\xf3n"),e.qZA()(),e.YNc(9,so,2,2,"ng-container",32),e.ALo(10,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("mat-sort-header","date"),e.xp6(6),e.Q6J("ngIf",e.lcZ(10,2,t.role$))}}function ao(n,o){1&n&&(e.TgZ(0,"div",46),e._uU(1," \xa1A\xfan ha creado ning\xfan rol a\xfan! "),e.qZA())}const lo=[{path:"",component:(()=>{class n{constructor(t,i,s,r){this._changeDetectorRef=t,this._fuseConfirmationService=i,this._roleService=s,this.dialog=r,this.emptyRole=new U,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new p.NI,this.selectedRole=null,this._unsubscribeAll=new Y.x}ngOnInit(){this.emptyRole.clear(),this.role$=this._roleService.roles$,this.searchInputControl.valueChanges.pipe((0,y.R)(this._unsubscribeAll),(0,Ce.b)(200),(0,ye.w)(t=>(this.closeDetails(),this.isLoading=!0,this._roleService.roles$.pipe((0,y.R)(this._unsubscribeAll)).subscribe(i=>{this.role$=(0,$.of)(i.filter(s=>s.name.toLowerCase().includes(t.toLowerCase()))),this.isLoading=!1}),(0,$.of)(t)))).subscribe()}ngAfterViewInit(){}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDetails(){this.selectedRole=null}createRole(){this.openDialog(this.emptyRole,"add")}updateRole(t){this.openDialog(t,"edit")}deleteRole(t){this._fuseConfirmationService.open({title:"Eliminar Rol",message:"\xbfEsta seguro que desea eliminar este rol?",icon:{show:!0,name:"heroicons_outline:exclamation",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(s=>{"confirmed"===s&&this._roleService.deleteRole(t._id).subscribe(()=>{this._fuseConfirmationService.open({title:"Rol eliminada correctamente",message:"",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(t,i){return t||i.id}openDialog(t,i){this.dialog.open(qt,{maxWidth:"750px",minWidth:"600px",height:"auto",maxHeight:"90%",data:{singleRole:t,dialogMode:i},panelClass:"ath-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(pe.R),e.Y36(he.N),e.Y36(F.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ath-roles"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Ze.NW,5),e.Gf(S.YE,5)),2&t){let s;e.iGM(s=e.CRH())&&(i._paginator=s.first),e.iGM(s=e.CRH())&&(i._sort=s.first)}},decls:33,vars:9,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-mine-50","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"whitespace-nowrap","text-primary-700"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["class","ml-4 rounded-sm bg-primary-700","mat-raised-button","",3,"click",4,"ngxPermissionsOnly"],[1,"flex-auto","p-6","-mt-16","shadow","bg-mine-200","sm:p-10","rounded-t-2xl"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","w-full","filter-post"],[1,"flex","flex-col","mx-4","mt-6","mb-3","sm:mx-8"],[1,"flex","items-start"],[1,"border-none","fuse-mat-dense","fuse-mat-no-subscript","w-100"],["matInput","","type","text",3,"formControl","autocomplete","placeholder"],[1,"overflow-y-auto","max-h-120"],[4,"ngIf","ngIfElse"],["noRoles",""],["mat-raised-button","",1,"ml-4","rounded-sm","bg-primary-700",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","roles-grid","role-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","roles-grid","role-table","md:px-8"],[1,"hidden","truncate","sm:flex"],["svgIcon","heroicons_solid:fire","class","mr-1",3,"color",4,"ngIf"],[1,"truncate"],["style","justify-content: center;","class","flex flex-row gap-2",4,"ngIf"],["svgIcon","heroicons_solid:fire",1,"mr-1",3,"color"],[1,"flex","flex-row","gap-2",2,"justify-content","center"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","",3,"click",4,"ngxPermissionsOnly"],["disabled","","class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Proximamente",4,"ngxPermissionsExcept"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["disabled","","mat-stroked-button","","matTooltip","Proximamente",1,"px-2","leading-6","min-w-10","min-h-7","h-7"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div")(6,"a",4),e._uU(7,"Usuarios"),e.qZA()(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Roles"),e.qZA()()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11)(18,"h2",12),e._uU(19," Gesti\xf3n de Roles "),e.qZA()()(),e.TgZ(20,"div",13),e.YNc(21,kt,4,1,"button",14),e.qZA()(),e.TgZ(22,"div",15)(23,"div",16)(24,"fuse-card",17)(25,"div",18)(26,"div",19)(27,"mat-form-field",20),e._UZ(28,"input",21),e.qZA()()(),e.TgZ(29,"div",22),e.YNc(30,ro,11,4,"ng-container",23),e.YNc(31,ao,2,0,"ng-template",null,24,e.W1O),e.qZA()()()()()),2&t){const s=e.MAs(32);e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(7),e.Q6J("ngxPermissionsOnly","ManagementCreate"),e.xp6(7),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","T\xedtulo..."),e.xp6(2),e.Q6J("ngIf",i.role$)("ngIfElse",s)}},directives:[Wt.PQ,_e.Hw,B.yS,ve.lW,Kt.y,M.KE,xe.Nt,p.Fj,p.JJ,p.oH,C.O5,S.YE,S.nU,C.sg,Xt.gM],pipes:[C.Ov],styles:[".roles-grid{grid-template-columns:auto 95px}@media (min-width: 960px){.roles-grid{grid-template-columns:150px auto 95px}}@media (min-width: 1280px){.roles-grid{grid-template-columns:150px auto 95px}}\n"],encapsulation:2,data:{animation:Ae.L},changeDetection:0}),n})()}];let co=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[B.Bz.forChild(lo),be.m]]}),n})()}}]);